<?xml version="1.0" encoding="UTF-8"?>
<jcr:root xmlns:cq="http://www.day.com/jcr/cq/1.0" xmlns:jcr="http://www.jcp.org/jcr/1.0"
    jcr:primaryType="cq:Dialog"
    title="List Nav"
    selectTab="function(tabToSelect) { AEMDESIGN.author.components.list.manageTabs(this.findByType('tabpanel')[0],tabToSelect,true); }"
    hideTab="function(tabToHide) { AEMDESIGN.author.components.list.hideTab(tabToHide, this.findByType('tabpanel')[0]); }"
    xtype="dialog">
    <items jcr:primaryType="cq:WidgetCollection">
        <tabs jcr:primaryType="cq:TabPanel" xtype="tabpanel">
            <items jcr:primaryType="cq:WidgetCollection">
                <!-- basic information tab -->
                <listTab
                        jcr:primaryType="cq:Panel"
                        title="Basic"
                        name="listTab"
                        xtype="panel">
                    <listeners
                            jcr:primaryType="nt:unstructured"
                            render="function() { this.findParentByType('dialog').includeTab(this); }"/>

                    <items jcr:primaryType="cq:WidgetCollection">
                        <listFrom
                                jcr:primaryType="cq:Widget"
                                defaultValue=""
                                fieldLabel="Build list using"
                                name="./listFrom"
                                type="select"
                                xtype="selection">
                            <listeners
                                    jcr:primaryType="nt:unstructured"
                                    loadcontent="function(){ this.findParentByType('dialog').selectTab(this.getValue());}"
                                    selectionchanged="function(box,value){ box.findParentByType('dialog').selectTab(value); }"/>
                            <options jcr:primaryType="cq:WidgetCollection">
                                <children
                                        jcr:primaryType="nt:unstructured"
                                        text="Child pages"
                                        value="children"/>
                                <damCollection
                                        jcr:primaryType="nt:unstructured"
                                        text="DAM Collection"
                                        value="collection"/>
                            </options>
                        </listFrom>
                    </items>
                </listTab>
                <childrenTab
                        jcr:primaryType="cq:Widget"
                        title="Child pages"
                        xtype="panel"
                        name="children">
                    <listeners
                            jcr:primaryType="nt:unstructured"
                            render="function() { this.findParentByType('dialog').hideTab(this); }"/>
                    <items jcr:primaryType="cq:WidgetCollection">
                        <listPath
                            jcr:primaryType="cq:Widget"
                             fieldLabel="Search In Path"
                            rootPath="/content"
                            name="./searchInPath"
                            xtype="pathfield"/>
                        <filterpage
                                jcr:primaryType="cq:Widget"
                                fieldLabel="Default Starting Pointer"
                                fieldDescription="Leave empty to use current page"
                                name="./filterPage"
                                rootPath="/content"
                                xtype="pathfield"/>
                   </items>
                </childrenTab>
                <damCollectionTab
                        jcr:primaryType="cq:Widget"
                        title="DAM Collection"
                        xtype="panel"
                        name="collection">
                    <listeners
                            jcr:primaryType="nt:unstructured"
                            render="function() { this.findParentByType('dialog').hideTab(this); }"/>
                    <items jcr:primaryType="cq:WidgetCollection">
                        <listCollections jcr:primaryType="cq:Widget"
                            allowBlank="{Boolean}true"
                            defaultValue=""
                            value=""
                            fieldLabel="Collection"
                            name="./collection"
                            options="/bin/querybuilder.json?path=/content/dam/collections/&amp;property=sling:resourceType&amp;property.value=dam/collection"
                            optionsTextField="title"
                            optionsValueField="path"
                            optionsRoot="hits"
                            type="select"
                            xtype="selection" />
                        <backPage jcr:primaryType="cq:Widget"
                            fieldLabel="Back Page"
                            name="./backPage"
                            rootPath="/content"
                            xtype="pathfield"/>
                        <assetViewerPage jcr:primaryType="cq:Widget"
                            fieldLabel="Asset Viewer Page Path"
                            name="./assetViewerPagePath"
                            rootPath="/content"
                            fieldDescription="Leave empty to use current page"
                            xtype="pathfield"/>
                    </items>
                </damCollectionTab>
                <styleTab
                        jcr:primaryType="cq:Widget"
                        path="/apps/aemdesign/global/dialog/classic/common/items/styleTab.infinity.json"
                        xtype="cqinclude" />
                <accessibilityTab jcr:primaryType="cq:Panel"
                                  path="/apps/aemdesign/global/dialog/classic/common/items/accessibilityTab.infinity.json"
                                  xtype="cqinclude"/>
            </items>
        </tabs>
    </items>
</jcr:root>
