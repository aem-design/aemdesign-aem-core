<template data-sly-template.variant="${@ componentProperties}">
    <sly data-sly-use.clientlib="/libs/granite/sightly/templates/clientlib.html"
         data-sly-call="${clientlib.all @ categories=['aemdesign.components.datalayer']}"></sly>

    ${'<script type="text/javascript" id="datalayer">' @ context = "unsafe"}
        window.digitalData = {
            "page": {
                "pageInfo": {
                    "abort": "${componentProperties.abort @ content="unsafe"}",
                    "contentCountry": "${componentProperties.contentCountry}",
                    "contentLanguage": "${componentProperties.contentLanguage}",
                    "pageName": "${componentProperties.pageName}",
                    "pageType": "${componentProperties.pageType}",
                    "pagePath": "${componentProperties.pagePath}",
                    "effectiveDate": "${componentProperties.effectiveDate}",
                    "platform": "${componentProperties.platform}"
                }
            },
            "form": [],
            "event": [],
            "error": []
        };
        window.digitalData.page.pageInfo.referringURL = AEMDESIGN.analytics.getReferringUrl();
        window.digitalData.page.pageInfo.destinationUrl = AEMDESIGN.analytics.getDestinationUrl();
        $(document).ready(function(){
            window.digitalData.page.pageInfo.sections = AEMDESIGN.analytics.getSections();
        });
        window.digitalData.page.pageInfo.breakPoint = AEMDESIGN.analytics.getBreakpoint()["label"];
    ${'</script>' @ context = "unsafe"}
</template>